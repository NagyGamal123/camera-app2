<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙƒØ§Ù…ÙŠØ±Ø§ Ø­ÙŠØ©</title>
    <style>
        video {
            border: 2px solid black;
            width: 100%;
            max-width: 500px;
        }
        #canvas {
            display: none;
        }
    </style>
</head>
<body>
    <h1>Ù…Ø±Ø­Ø¨Ù‹Ø§ØŒ Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± Ù„Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø©!</h1>

    <!-- Ø¹Ø±Ø¶ ÙÙŠØ¯ÙŠÙˆ ÙƒØ§Ù…ÙŠØ±Ø§ Ø§Ù„ÙˆÙŠØ¨ -->
    <video id="video" autoplay></video>
    <br>
    <button onclick="takePhoto()">Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ØµÙˆØ±Ø©</button>
    <canvas id="canvas"></canvas>

    <script>
        // ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
        function startCamera() {
            navigator.mediaDevices.getUserMedia({ video: true })
                .then(function(stream) {
                    document.getElementById('video').srcObject = stream;
                })
                .catch(function(error) {
                    alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§: ' + error);
                });
        }

        // Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ØµÙˆØ±Ø© ÙˆØ­ÙØ¸Ù‡Ø§
        function takePhoto() {
            const video = document.getElementById('video');
            const canvas = document.getElementById('canvas');
            const context = canvas.getContext('2d');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            context.drawImage(video, 0, 0, canvas.width, canvas.height);
            const dataURL = canvas.toDataURL('image/png'); // Ø­ÙØ¸ Ø§Ù„ØµÙˆØ±Ø© ÙƒÙ€ base64

            // Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø§Ø¨Ø· Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©
            const link = document.createElement('a');
            link.href = dataURL; // Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© Ø¨ØªÙ†Ø³ÙŠÙ‚ base64
            link.download = 'photo.png'; // Ø§Ø³Ù… Ø§Ù„ØµÙˆØ±Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„Ù‡Ø§
            link.click(); // Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø§Ø¨Ø· Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ±Ø©

            alert('ØªÙ… Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ØµÙˆØ±Ø© ÙˆØªØ­Ù…ÙŠÙ„Ù‡Ø§! ğŸ˜');
        }

        // Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø© ÙƒÙ„ 5 Ø¯Ù‚Ø§Ø¦Ù‚ (300000 Ù…Ù„ÙŠ Ø«Ø§Ù†ÙŠØ©)
        setInterval(takePhoto, 300000); // 5 Ø¯Ù‚Ø§Ø¦Ù‚

        // Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.onload = startCamera;
    </script>
</body>
</html>

